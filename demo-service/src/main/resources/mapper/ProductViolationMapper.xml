<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.demo.mapper.ProductViolationMapper">
    <!-- SQL：insert，insert 语句用于对应 Mapper 方法的数据访问。 -->
    <insert id="insert" parameterType="com.demo.entity.ProductViolation">
        INSERT INTO product_violations (product_id, violation_type, description, evidence_urls, punishment_result, credit_score_change, status)
        VALUES (#{violation.productId}, #{violation.violationType}, #{violation.description}, #{violation.evidenceUrls}, #{violation.punishmentResult}, #{violation.creditScoreChange}, #{violation.status})
    </insert>
    <!-- SQL：findByProductId，select 语句用于对应 Mapper 方法的数据访问。 -->
    <select id="findByProductId" parameterType="java.lang.Long" resultType="com.demo.entity.ProductViolation">
        SELECT id, product_id, violation_type, description, evidence_urls, punishment_result, credit_score_change, status
        FROM product_violations
        WHERE product_id = #{productId}
        AND status = 'active'
    </select>
</mapper>
